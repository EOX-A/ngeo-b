<?xml version="1.0" encoding="UTF-8"?>
<mapcache>
    <cache name="TEST_SAR" type="sqlite3">
        <dbfile>{{ mapcache_dir }}TEST_SAR.sqlite</dbfile>
    </cache>

    <cache name="TEST_OPTICAL" type="sqlite3">
        <dbfile>{{ mapcache_dir }}TEST_OPTICAL.sqlite</dbfile>
    </cache>

    <source name="TEST_SAR" type="wms">
        <getmap>
            <params>
                <LAYERS>TEST_SAR</LAYERS>
                <TRANSPARENT>true</TRANSPARENT>
            </params>
        </getmap>
        <http>
            <url>{{ base_url }}/ows?</url>
        </http>
    </source>

    <source name="TEST_OPTICAL" type="wms">
        <getmap>
            <params>
                <LAYERS>TEST_OPTICAL</LAYERS>
                <TRANSPARENT>true</TRANSPARENT>
            </params>
        </getmap>
        <http>
            <url>{{ base_url }}/ows?</url>
        </http>
    </source>

    <tileset name="TEST_SAR">
        <source>TEST_SAR</source>
        <cache>TEST_SAR</cache>
        <grid>WGS84</grid>
        <format>mixed</format>
        <metatile>2 2</metatile>
        <metabuffer>10</metabuffer>
        <expires>3600</expires>
        <timedimension type="sqlite" default="2010">
            <dbfile>{{ mapcache_test_db }}</dbfile>
            <query>select strftime('%Y-%m-%dT%H:%M:%SZ',start_time)||'/'||strftime('%Y-%m-%dT%H:%M:%SZ',end_time) from time where source_id=:tileset and start_time&gt;=datetime(:start_timestamp,'unixepoch') and end_time&lt;=datetime(:end_timestamp,'unixepoch') order by end_time</query>
        </timedimension>
    </tileset>

    <tileset name="TEST_OPTICAL">
        <source>TEST_OPTICAL</source>
        <cache>TEST_OPTICAL</cache>
        <grid>WGS84</grid>
        <format>mixed</format>
        <metatile>2 2</metatile>
        <metabuffer>10</metabuffer>
        <expires>3600</expires>
        <timedimension type="sqlite" default="2010">
            <dbfile>{{ mapcache_test_db }}</dbfile>
            <query>select strftime('%Y-%m-%dT%H:%M:%SZ',start_time)||'/'||strftime('%Y-%m-%dT%H:%M:%SZ',end_time) from time where source_id=:tileset and start_time&gt;=datetime(:start_timestamp,'unixepoch') and end_time&lt;=datetime(:end_timestamp,'unixepoch') order by end_time</query>
        </timedimension>
    </tileset>

    <default_format>PNG</default_format>
    <format name="mypng" type ="PNG">
        <compression>fast</compression>
    </format>
    <format name="myjpeg" type ="JPEG">
        <quality>85</quality>
        <photometric>ycbcr</photometric>
    </format>
    <format name="mixed" type="MIXED">
        <transparent>mypng</transparent>
        <opaque>myjpeg</opaque>
    </format>

    <service type="wms" enabled="true">
        <full_wms>assemble</full_wms>
        <resample_mode>bilinear</resample_mode>
        <format>JPEG</format>
        <maxsize>4096</maxsize>
    </service>
    <service type="wmts" enabled="true"/>
    <service type="demo" enabled="true"/>

    <errors>empty_img</errors>
    <lock_dir>/tmp</lock_dir>
</mapcache>
